var StatefulForm=function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}function a(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var a=[],r=!0,n=!1,o=void 0;try{for(var u,i=t[Symbol.iterator]();!(r=(u=i.next()).done)&&(a.push(u.value),!e||a.length!==e);r=!0);}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}return a}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var s={button:{tag:"button",setter:"button",data:{attr:{type:"button"}}},checkbox:{tag:"input",setter:"checked",data:{}},radio:{tag:"input",setter:"checked",data:{}},color:{tag:"input",setter:"value",data:{}},date:{tag:"input",setter:"value",data:{}},"datetime-local":{tag:"input",setter:"value",data:{}},email:{tag:"input",setter:"value",data:{}},file:{tag:"input",setter:"value",data:{}},hidden:{tag:"input",setter:"value",data:{}},image:{tag:"input",setter:"value",data:{}},month:{tag:"input",setter:"value",data:{}},number:{tag:"input",setter:"value",data:{}},password:{tag:"input",setter:"value",data:{}},range:{tag:"input",setter:"value",data:{}},reset:{tag:"input",setter:"button",data:{}},search:{tag:"input",setter:"value",data:{}},submit:{tag:"input",setter:"button",data:{}},tel:{tag:"input",setter:"value",data:{}},text:{tag:"input",setter:"value",data:{}},time:{tag:"input",setter:"value",data:{}},url:{tag:"input",setter:"value",data:{}},week:{tag:"input",setter:"value",data:{}},textarea:{tag:"textarea",setter:"innerHTML",data:{}},select:{tag:"select",setter:"selected",data:{}},selectMultiple:{tag:"select",setter:"selected",data:{domProps:{multiple:!0}}}},c=function(t,e){var a,r=this,o=s[e.type];o.data=n(n({},o.data),{},{class:["form-input","form-input-".concat(o.tag),"form-input-".concat(e.type)],attrs:n({id:e.id||e.name},e),domProps:(null===(a=o.data)||void 0===a?void 0:a.domProps)||{},ref:e.name}),["value","checked"].includes(o.setter)&&(o.data.attrs.value=this.$attrs.value?this.$attrs.value[e.name]:""),["textarea"].includes(o.tag)&&(o.data.domProps.innerHTML=this.$attrs.value?this.$attrs.value[e.name]:""),"button"===o.setter&&(o.data.attrs.value=e.name),["button"].includes(o.tag)&&(o.data.domProps.innerHTML=e.label||e.name);var i=[];if(e.options){if("selected"===o.setter){var l=e.options.map((function(a){var n=a.label,o=a.value,u=r.$attrs.value&&Array.isArray(r.$attrs.value[e.name]||[])?(r.$attrs.value[e.name]||[]).includes(o):r.$attrs.value[e.name]===o;return t("option",{attrs:{value:o,selected:u},domProps:{innerText:n}})}));i.push.apply(i,u(l))}if("checked"===o.setter){var c=e.options.map((function(a,n){var u=a.label,i=a.value,l=r.$attrs.value&&Array.isArray(r.$attrs.value[e.name]||[])?(r.$attrs.value[e.name]||[]).includes(i):r.$attrs.value[e.name]===i;return t("div",{class:"form-group-label"},[t("label",{class:"form-label form-label-".concat(o.tag," form-label-").concat(e.type),attrs:{for:"".concat(e.name,"-").concat(n)}},[t("span",{class:"form-label-text",domProps:{innerText:u}}),t("input",{attrs:{value:i,checked:l,id:"".concat(e.name,"-").concat(n),name:e.name,type:e.type},domProps:{innerText:u},ref:"".concat(e.name,"-").concat(n)})])])}));i.push.apply(i,u(c))}}return"checked"===o.setter&&(o.tag="div",o.data.ref=null),t("div",{class:["form-input-wrapper","form-input-".concat(o.tag),"form-input-".concat(e.type)]},[t("checked"===o.setter?"div":"label",{class:"checked"===o.setter?"form-label-wrapper":"form-label form-label-".concat(o.tag," form-label-").concat(e.type),attrs:{for:e.name}},[!1===["checked","button"].includes(o.setter)&&null!==(null==e?void 0:e.label)?t("div",{class:"form-label-text",domProps:{innerText:e.label||e.name}}):null,t(o.tag,o.data,i)])])},d=e(t).default.extend({name:"StatefulForm",props:{schema:{type:Array,required:!0},debounce:{type:Number,required:!1,default:10,validator:function(t){return t>=0}}},methods:{getFormData:function(){var t=this,e=new FormData(this.$el),a=Array.from(e).reduce((function(a,r){var n=o(r,1)[0],u=t.schema.find((function(t){return t.name===n}))||t.schema[0],i=(u.options||[]).length>1&&!1===["radio","select"].includes(u.type)?e.getAll(n):e.get(n);return a[n]=i,a}),{});return Object.entries(this.schema).forEach((function(t){var e=o(t,2);e[0];var r=e[1],n=r.name,u=r.type,i=r.options,l=void 0===i?[]:i;["reset","submit","button"].includes(u)||a[n]||(a[n]=l.length>1&&!1===["radio","select"].includes(u)?[]:null)})),a},inputHandler:function(){var t=this;clearTimeout(this.delayer),this.delayer=setTimeout((function(){var e=t.getFormData();t.$emit("input",e)}),this.debounce)}},render:function(t){var e=this;return t("form",{class:"stateful-form",on:n(n({},this.$listeners),{},{input:this.inputHandler})},this.schema.map((function(a){return c.call(e,t,a)})))}}),p=function(){var t=d;return t.install=function(e){e.component("StatefulForm",t)},t}(),f=Object.freeze({__proto__:null,default:p});return Object.entries(f).forEach((function(t){var e=o(t,2),a=e[0],r=e[1];"default"!==a&&(p[a]=r)})),p}(Vue);